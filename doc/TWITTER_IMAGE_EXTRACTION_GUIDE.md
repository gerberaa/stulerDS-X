# üê¶ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ Twitter

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω—ñ—à–µ –±–æ—Ç –≤–∏—Ç—è–≥—É–≤–∞–≤ –≤—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ç–≤—ñ—Ç—ñ–≤, –≤–∫–ª—é—á–∞—é—á–∏ –∞–≤–∞—Ç–∞—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —â–æ –Ω–µ —î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ —Å–∞–º–æ–≥–æ –ø–æ—Å—Ç–∞.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è
–¢–µ–ø–µ—Ä –±–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–æ–∑—É–º–Ω—É –ª–æ–≥—ñ–∫—É –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ —Å–∞–º–æ–≥–æ —Ç–≤—ñ—Ç–∞:

### üîç –î–≤–æ–µ—Ç–∞–ø–Ω–∏–π –ø—Ä–æ—Ü–µ—Å

#### 1Ô∏è‚É£ **–ü–µ—Ä–≤–∏–Ω–Ω–µ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑ –ø—Ä–æ—Ñ—ñ–ª—é**
- –í—ñ–¥–∫—Ä–∏–≤–∞—î –ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ó–Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–≤—ñ—Ç–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- –®—É–∫–∞—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –∫–æ–∂–Ω–æ–º—É —Ç–≤—ñ—Ç—ñ

#### 2Ô∏è‚É£ **–î–µ—Ç–∞–ª—å–Ω–µ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑ –æ–∫—Ä–µ–º–∏—Ö —Ç–≤—ñ—Ç—ñ–≤**
- –î–ª—è —Ç–≤—ñ—Ç—ñ–≤ –±–µ–∑ –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤—ñ–¥–∫—Ä–∏–≤–∞—î –∫–æ–∂–µ–Ω —Ç–≤—ñ—Ç –æ–∫—Ä–µ–º–æ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–æ–≤—É –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
- –®—É–∫–∞—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ –ø–æ–≤–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó —Ç–≤—ñ—Ç–∞
- –ó–∞–∫—Ä–∏–≤–∞—î –≤–∫–ª–∞–¥–∫—É —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –ø—Ä–æ—Ñ—ñ–ª—é

## üõ°Ô∏è –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

### ‚ùå **–í–∏–∫–ª—é—á–∞—î–º–æ (–∞–≤–∞—Ç–∞—Ä–∫–∏):**
```python
exclude_patterns = [
    'profile_images',      # –ü—Ä–æ—Ñ—ñ–ª—å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    'avatar',             # –ê–≤–∞—Ç–∞—Ä–∫–∏
    'profile_pic',        # –§–æ—Ç–æ –ø—Ä–æ—Ñ—ñ–ª—é
    'default_profile',    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ
    'normal.jpg',         # –†–æ–∑–º—ñ—Ä–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫
    'bigger.jpg',
    'mini.jpg',
    '400x400',            # –†–æ–∑–º—ñ—Ä–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫
    '200x200',
    '48x48'
]
```

### ‚úÖ **–í–∫–ª—é—á–∞—î–º–æ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–≤—ñ—Ç—ñ–≤):**
```python
include_patterns = [
    'media',                    # –ú–µ–¥—ñ–∞ —Ñ–∞–π–ª–∏
    'pbs.twimg.com/media',     # Twitter –º–µ–¥—ñ–∞ —Å–µ—Ä–≤–µ—Ä
    'ton.twimg.com/media'      # Twitter –º–µ–¥—ñ–∞ —Å–µ—Ä–≤–µ—Ä
]
```

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –ø–æ—à—É–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å
```python
tweet_image_selectors = [
    '[data-testid="tweetPhoto"] img',           # –û—Å–Ω–æ–≤–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–≤—ñ—Ç–∞
    'div[data-testid="tweetPhoto"] img',        # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å
    '[data-testid="tweetPhoto"] div[style*="background-image"]',  # Background –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    'div[data-testid="tweetPhoto"] div[style*="background-image"]',
    '[role="img"][data-testid="tweetPhoto"]',   # Role-based —Å–µ–ª–µ–∫—Ç–æ—Ä–∏
    'div[data-testid="tweetPhoto"]',
    '[data-testid="tweetPhoto"]'
]
```

### –ü—Ä–æ—Ü–µ—Å –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ç–≤—ñ—Ç–∞
```python
async def _enhance_tweet_with_images(self, tweet: Dict) -> Dict:
    # 1. –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –Ω–æ–≤—É –≤–∫–ª–∞–¥–∫—É
    self.driver.execute_script("window.open('');")
    self.driver.switch_to.window(self.driver.window_handles[-1])
    
    # 2. –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ç–≤—ñ—Ç–∞
    self.driver.get(tweet_url)
    await asyncio.sleep(3)
    
    # 3. –í–∏—Ç—è–≥—É—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    images = self._extract_images_from_opened_tweet()
    
    # 4. –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤–∫–ª–∞–¥–∫—É
    self.driver.close()
    self.driver.switch_to.window(self.driver.window_handles[0])
    
    return tweet
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –î–æ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
```
üì∑ –ó–æ–±—Ä–∞–∂–µ–Ω—å: 2
   1. https://pbs.twimg.com/media/G0uuw66WcAAYdPe (–ó–û–ë–†–ê–ñ–ï–ù–ù–Ø –¢–í–Ü–¢–ê)
   2. https://pbs.twimg.com/profile_images/1966237110710468608/Yvl5FRD9_normal.jpg (–ê–í–ê–¢–ê–†–ö–ê!)
```

### –ü—ñ—Å–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
```
üì∑ –ó–æ–±—Ä–∞–∂–µ–Ω—å: 1
   1. https://pbs.twimg.com/media/G0uuw66WcAAYdPe (–ó–û–ë–†–ê–ñ–ï–ù–ù–Ø –¢–í–Ü–¢–ê)
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–∏–π —Ç–µ—Å—Ç:
```bash
python test_image_functionality.py
```

–¢–µ—Å—Ç —Ç–µ–ø–µ—Ä –ø–æ–∫–∞–∑—É—î:
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
- üîç –¢–∏–ø –∫–æ–∂–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Ç–≤—ñ—Ç/–∞–≤–∞—Ç–∞—Ä–∫–∞)
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ç–≤—ñ—Ç–∞

## ‚ö° –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### –®–≤–∏–¥–∫—ñ—Å—Ç—å:
- –í—ñ–¥–∫—Ä–∏–≤–∞—î –æ–∫—Ä–µ–º—ñ —Ç–≤—ñ—Ç–∏ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–µ –∑–Ω–∞–π—à–æ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–æ—Ä–æ—Ç–∫—ñ –∑–∞—Ç—Ä–∏–º–∫–∏ (3 —Å–µ–∫—É–Ω–¥–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏–≤–∞—î –≤–∫–ª–∞–¥–∫–∏

### –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å:
- –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ç–≤—ñ—Ç—ñ–≤
- –ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –æ—Å–Ω–æ–≤–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
- –õ–æ–≥—É—î –≤—Å—ñ –∫—Ä–æ–∫–∏ –ø—Ä–æ—Ü–µ—Å—É

### –¢–æ—á–Ω—ñ—Å—Ç—å:
- –§—ñ–ª—å—Ç—Ä—É—î –∞–≤–∞—Ç–∞—Ä–∫–∏ —Ç–∞ –ø—Ä–æ—Ñ—ñ–ª—å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –í–∏—Ç—è–≥—É—î —Ç—ñ–ª—å–∫–∏ –º–µ–¥—ñ–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –û—á–∏—â–∞—î URL –≤—ñ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä –±–æ—Ç:
1. üîç **–ó–Ω–∞—Ö–æ–¥–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ç–≤—ñ—Ç—ñ–≤** (–Ω–µ –∞–≤–∞—Ç–∞—Ä–∫–∏)
2. üì± **–í—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–≤—ñ—Ç–∏ –æ–∫—Ä–µ–º–æ** –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è
3. üõ°Ô∏è **–§—ñ–ª—å—Ç—Ä—É—î –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è**
4. üì§ **–í—ñ–¥–ø—Ä–∞–≤–ª—è—î —Ç—ñ–ª—å–∫–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç–∞**

–¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î —Ç–æ—á–Ω–µ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —Å–∞–º–µ –∑ —Ç–≤—ñ—Ç—ñ–≤, –∞ –Ω–µ –∑ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤!